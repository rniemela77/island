import*as e from"https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.module.js";import{PointerLockControls as F}from"https://cdn.jsdelivr.net/npm/three@0.153.0/examples/jsm/controls/PointerLockControls.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();const d=new e.Scene;d.background=new e.Color(2236962);d.fog=new e.FogExp2(1118481,.03);const s=new e.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,.5,1.5);const f=new e.WebGLRenderer({antialias:!0});f.setSize(window.innerWidth,window.innerHeight);f.shadowMap.enabled=!0;document.body.appendChild(f.domElement);const w=new F(s,document.body);document.addEventListener("click",()=>{w.lock()});let u=new e.Vector3,M=new e.Vector3;const P=2.5,S=.15,x=new e.AmbientLight(7368816,1.2);d.add(x);const h=new e.PointLight(16755200,2,30);h.position.set(0,0,0);s.add(h);d.add(h);const z=new e.PlaneGeometry(1e3,1e3),E=new e.MeshStandardMaterial({color:4153151}),g=new e.Mesh(z,E);g.rotation.x=-Math.PI/2;g.receiveShadow=!0;d.add(g);function G(n,r){const i=e.MathUtils.randFloat(8,12),a=e.MathUtils.randFloat(6,10),t=e.MathUtils.randFloat(3,5),o=e.MathUtils.randFloat(-.1,.1),c=new e.CylinderGeometry(.5,.5,i,16),v=new e.MeshStandardMaterial({color:7032655}),l=new e.Mesh(c,v);l.position.set(n,i/2,r),l.rotation.y=o,l.castShadow=!0;const L=new e.ConeGeometry(t,a,16),b=new e.MeshStandardMaterial({color:1721376}),p=new e.Mesh(L,b);p.position.set(0,i/2+a/2,0),p.castShadow=!0,l.add(p),d.add(l)}for(let n=-200;n<=200;n+=8)for(let r=-200;r<=200;r+=8)if(Math.random()>.2){const i=e.MathUtils.randFloat(-4,4),a=e.MathUtils.randFloat(-4,4);G(n+i,r+a)}let m=!1;document.addEventListener("pointerdown",n=>{w.isLocked&&(m=!0,n.preventDefault())});document.addEventListener("pointerup",()=>{m=!1});function y(){requestAnimationFrame(y),w.isLocked&&(u.z-=u.z*S,M.z=m?1:0,M.normalize(),m&&(u.z-=M.z*P*.05),w.moveForward(-u.z*.05)),h.position.copy(s.position),f.render(d,s)}y();window.addEventListener("resize",()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight)});
